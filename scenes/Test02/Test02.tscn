[gd_scene load_steps=17 format=2]

[ext_resource path="res://scenes/Test02/Test02.gd" type="Script" id=1]
[ext_resource path="res://scenes/Test02/Camera.gd" type="Script" id=2]
[ext_resource path="res://prefabs/wall/Wall.tscn" type="PackedScene" id=3]
[ext_resource path="res://tools/BoxEmitter.tscn" type="PackedScene" id=4]
[ext_resource path="res://tools/Constructor/Constructor.tscn" type="PackedScene" id=5]
[ext_resource path="res://characters/Buddy/Player.tscn" type="PackedScene" id=6]
[ext_resource path="res://characters/Buddy/BuddyIA.tscn" type="PackedScene" id=7]
[ext_resource path="res://tools/Team.tscn" type="PackedScene" id=8]
[ext_resource path="res://ui/PlayerUI.tscn" type="PackedScene" id=9]
[ext_resource path="res://ui/game-over/GameOver.tscn" type="PackedScene" id=10]

[sub_resource type="ProceduralSky" id=1]

[sub_resource type="Environment" id=2]
background_mode = 2
background_sky = SubResource( 1 )
ss_reflections_enabled = true
ssao_enabled = true
dof_blur_far_enabled = true
dof_blur_far_distance = 12.09
dof_blur_far_transition = 20.66
dof_blur_far_amount = 0.06
glow_enabled = true

[sub_resource type="NavigationMesh" id=3]
vertices = PoolVector3Array( -31.3, 0.4, -39.4, -39.4, 0.4, -39.4, -39.4, 0.4, -27.7, -23.2, 0.4, -39.4, -31.3, 0.4, -39.4, -39.4, 0.4, -27.7, -9.1, 0.4, -17.8, -6.7, 0.4, -17.8, -6.7, 0.4, -39.4, -15.1, 0.4, -39.4, -9.4, 0.4, -16, -9.1, 0.4, -17.8, -15.1, 0.4, -39.4, -23.2, 0.4, -39.4, -39.4, 0.4, -27.7, -39.4, 0.4, -16, -0.0999985, 0.4, -39.4, -6.7, 0.4, -39.4, -6.7, 0.4, -17.8, -0.0999985, 0.4, -17.8, -0.0999985, 0.4, -17.8, 6.8, 0.4, -17.8, 6.8, 0.4, -39.4, -0.0999985, 0.4, -39.4, 39.5, 0.4, -27.7, 39.5, 0.4, -39.4, 31.1, 0.4, -39.4, 39.5, 0.4, -27.7, 31.1, 0.4, -39.4, 23, 0.4, -39.4, 6.8, 0.4, -39.4, 6.8, 0.4, -17.8, 9.2, 0.4, -17.8, 14.9, 0.4, -39.4, 14.9, 0.4, -39.4, 9.2, 0.4, -17.8, 9.5, 0.4, -16, 39.5, 0.4, -16, 39.5, 0.4, -27.7, 23, 0.4, -39.4, -8.2, 2.4, -16.6, -8.2, 2.4, -15.7, -0.0999985, 2.4, -15.7, -0.0999985, 2.4, -16.6, -0.0999985, 2.4, -15.7, 8.3, 2.4, -15.7, 8.3, 2.4, -16.6, -0.0999985, 2.4, -16.6, -9.1, 0.4, 15.5, -6.7, 0.4, 15.5, -6.7, 0.4, -14.5, -9.1, 0.4, -14.5, -39.4, 0.4, -7.9, -39.4, 0.4, 0.5, -9.1, 0.4, 15.5, -39.4, 0.4, 0.5, -39.4, 0.4, 8.6, -39.4, 0.4, 17, -9.4, 0.4, 17, -9.1, 0.4, 15.5, -39.4, 0.4, 8.6, -9.1, 0.4, -14.5, -9.4, 0.4, -16, -39.4, 0.4, -16, -39.4, 0.4, -7.9, 9.2, 0.4, -14.5, 6.8, 0.4, -14.5, 6.8, 0.4, 15.5, 9.2, 0.4, 15.5, 39.5, 0.4, 8.6, 39.5, 0.4, 0.5, 39.5, 0.4, 0.5, 39.5, 0.4, -7.9, 9.2, 0.4, -14.5, 9.2, 0.4, 15.5, 9.5, 0.4, 17, 39.5, 0.4, 17, 39.5, 0.4, 8.6, 39.5, 0.4, -16, 9.5, 0.4, -16, 9.2, 0.4, -14.5, 39.5, 0.4, -7.9, -0.0999985, 0.4, -14.5, -6.7, 0.4, -14.5, -6.7, 0.4, 15.5, -0.0999985, 0.4, 15.5, -0.0999985, 0.4, 15.5, 6.8, 0.4, 15.5, 6.8, 0.4, -14.5, -0.0999985, 0.4, -14.5, -8.2, 2.4, 16.7, -8.2, 2.4, 17.6, -0.0999985, 2.4, 17.6, -0.0999985, 2.4, 16.7, -0.0999985, 2.4, 17.6, 8.3, 2.4, 17.6, 8.3, 2.4, 16.7, -0.0999985, 2.4, 16.7, -39.4, 0.4, 28.1, -39.4, 0.4, 39.5, -31.6, 0.4, 39.5, -39.4, 0.4, 28.1, -31.6, 0.4, 39.5, -23.5, 0.4, 39.5, -7.6, 0.4, 39.5, -7.3, 0.4, 18.8, -9.1, 0.4, 18.8, -15.7, 0.4, 39.5, -15.7, 0.4, 39.5, -9.1, 0.4, 18.8, -9.4, 0.4, 17, -39.4, 0.4, 17, -39.4, 0.4, 28.1, -23.5, 0.4, 39.5, 31.4, 0.4, 39.5, 39.5, 0.4, 39.5, 39.5, 0.4, 28.1, 23.6, 0.4, 39.5, 31.4, 0.4, 39.5, 39.5, 0.4, 28.1, 9.2, 0.4, 18.8, 7.4, 0.4, 18.8, 7.7, 0.4, 39.5, 15.5, 0.4, 39.5, 9.5, 0.4, 17, 9.2, 0.4, 18.8, 15.5, 0.4, 39.5, 23.6, 0.4, 39.5, 39.5, 0.4, 28.1, 39.5, 0.4, 17, -7.3, 0.4, 18.8, -7.6, 0.4, 39.5, -0.0999985, 0.4, 39.5, -0.0999985, 0.4, 18.8, -0.0999985, 0.4, 39.5, 7.7, 0.4, 39.5, 7.4, 0.4, 18.8, -0.0999985, 0.4, 18.8 )
polygons = [ PoolIntArray( 2, 0, 1 ), PoolIntArray( 5, 3, 4 ), PoolIntArray( 9, 6, 8 ), PoolIntArray( 6, 7, 8 ), PoolIntArray( 15, 10, 14 ), PoolIntArray( 10, 11, 14 ), PoolIntArray( 11, 13, 14 ), PoolIntArray( 11, 12, 13 ), PoolIntArray( 19, 16, 18 ), PoolIntArray( 16, 17, 18 ), PoolIntArray( 23, 20, 22 ), PoolIntArray( 20, 21, 22 ), PoolIntArray( 26, 24, 25 ), PoolIntArray( 29, 27, 28 ), PoolIntArray( 33, 30, 32 ), PoolIntArray( 30, 31, 32 ), PoolIntArray( 39, 34, 38 ), PoolIntArray( 34, 37, 38 ), PoolIntArray( 34, 35, 37 ), PoolIntArray( 35, 36, 37 ), PoolIntArray( 43, 40, 42 ), PoolIntArray( 40, 41, 42 ), PoolIntArray( 47, 44, 46 ), PoolIntArray( 44, 45, 46 ), PoolIntArray( 53, 48, 52 ), PoolIntArray( 48, 49, 52 ), PoolIntArray( 49, 51, 52 ), PoolIntArray( 49, 50, 51 ), PoolIntArray( 56, 54, 55 ), PoolIntArray( 60, 57, 59 ), PoolIntArray( 57, 58, 59 ), PoolIntArray( 64, 61, 63 ), PoolIntArray( 61, 62, 63 ), PoolIntArray( 70, 65, 69 ), PoolIntArray( 65, 66, 69 ), PoolIntArray( 66, 68, 69 ), PoolIntArray( 66, 67, 68 ), PoolIntArray( 73, 71, 72 ), PoolIntArray( 77, 74, 76 ), PoolIntArray( 74, 75, 76 ), PoolIntArray( 81, 78, 80 ), PoolIntArray( 78, 79, 80 ), PoolIntArray( 85, 82, 84 ), PoolIntArray( 82, 83, 84 ), PoolIntArray( 89, 86, 88 ), PoolIntArray( 86, 87, 88 ), PoolIntArray( 93, 90, 92 ), PoolIntArray( 90, 91, 92 ), PoolIntArray( 97, 94, 96 ), PoolIntArray( 94, 95, 96 ), PoolIntArray( 100, 98, 99 ), PoolIntArray( 103, 101, 102 ), PoolIntArray( 107, 104, 106 ), PoolIntArray( 104, 105, 106 ), PoolIntArray( 113, 108, 112 ), PoolIntArray( 108, 111, 112 ), PoolIntArray( 108, 109, 111 ), PoolIntArray( 109, 110, 111 ), PoolIntArray( 116, 114, 115 ), PoolIntArray( 119, 117, 118 ), PoolIntArray( 123, 120, 122 ), PoolIntArray( 120, 121, 122 ), PoolIntArray( 129, 124, 128 ), PoolIntArray( 124, 125, 128 ), PoolIntArray( 125, 127, 128 ), PoolIntArray( 125, 126, 127 ), PoolIntArray( 133, 130, 132 ), PoolIntArray( 130, 131, 132 ), PoolIntArray( 137, 134, 136 ), PoolIntArray( 134, 135, 136 ) ]

[sub_resource type="CubeMesh" id=4]

[sub_resource type="SpatialMaterial" id=5]
albedo_color = Color( 0.94902, 0.827451, 0.588235, 1 )

[sub_resource type="BoxShape" id=6]

[node name="Game" type="Node"]
script = ExtResource( 1 )

[node name="Environment" type="Node" parent="."]
editor/display_folded = true

[node name="WorldEnvironment" type="WorldEnvironment" parent="Environment"]
environment = SubResource( 2 )

[node name="DirectionalLight" type="DirectionalLight" parent="Environment"]
transform = Transform( 0.753806, 0.418211, -0.506829, 0, 0.771316, 0.636453, 0.657097, -0.479762, 0.581423, 0, 3.067, 0 )
shadow_enabled = true

[node name="Camera" type="Camera" parent="Environment"]
transform = Transform( 1, 0, 0, 0, 0.710869, 0.703324, 0, -0.703324, 0.710869, -21.367, 8.70249, 25.304 )
script = ExtResource( 2 )

[node name="Navigation" type="Navigation" parent="Environment"]
editor/display_folded = true

[node name="NavigationMeshInstance" type="NavigationMeshInstance" parent="Environment/Navigation"]
navmesh = SubResource( 3 )

[node name="Ground" type="Spatial" parent="Environment/Navigation/NavigationMeshInstance"]

[node name="MeshInstance" type="MeshInstance" parent="Environment/Navigation/NavigationMeshInstance/Ground"]
transform = Transform( 40, 0, 0, 0, 0.5, 0, 0, 0, 40, 0, -0.5, 0 )
mesh = SubResource( 4 )
material/0 = SubResource( 5 )

[node name="StaticBody" type="StaticBody" parent="Environment/Navigation/NavigationMeshInstance/Ground/MeshInstance"]

[node name="CollisionShape" type="CollisionShape" parent="Environment/Navigation/NavigationMeshInstance/Ground/MeshInstance/StaticBody"]
shape = SubResource( 6 )

[node name="Wall" parent="Environment/Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 8.7813, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 17.1639 )

[node name="Wall2" parent="Environment/Navigation/NavigationMeshInstance" instance=ExtResource( 3 )]
transform = Transform( 8.7813, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -16.1737 )

[node name="BoxEmitter" parent="Environment" instance=ExtResource( 4 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7.317, 0 )
start = 5

[node name="ConstructorBlue" parent="Environment" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -23.6506, 0, 20.6155 )

[node name="ConstructorRed" parent="Environment" instance=ExtResource( 5 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 18.2488, 0, -22.6055 )
team = "Team_1"

[node name="WallW" parent="Environment" instance=ExtResource( 3 )]
transform = Transform( -1.96701e-006, 0, 6.487, 0, 1, 0, -45, 0, -2.83556e-007, -41.8414, 1, 5.78133e-008 )

[node name="WallE" parent="Environment" instance=ExtResource( 3 )]
transform = Transform( -1.96701e-006, 0, 6.487, 0, 1, 0, -45, 0, -2.83556e-007, 40, 1, 0 )

[node name="WallN" parent="Environment" instance=ExtResource( 3 )]
transform = Transform( -45, 0, -5.67112e-007, 0, 1, 0, 3.93402e-006, 0, -6.487, 0, 1, -40 )

[node name="WallS" parent="Environment" instance=ExtResource( 3 )]
transform = Transform( -45, 0, -5.67112e-007, 0, 1, 0, 3.93402e-006, 0, -6.487, 0, 1, 40 )

[node name="Characters" type="Node" parent="."]

[node name="Player" parent="Characters" instance=ExtResource( 6 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -21.367, 2, 18.862 )
color = "Blue"

[node name="BuddyIA" parent="Characters" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 15, 0.973, -20 )
team = "Team_1"
color = "Red"

[node name="BuddyIA2" parent="Characters" instance=ExtResource( 7 )]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -29.0337, 0.973, 18.03 )
color = "Blue"

[node name="Teams" type="Node" parent="."]

[node name="TeamBlue" parent="Teams" instance=ExtResource( 8 )]
team = "Team_0"
color = "Blue"

[node name="TeamRed" parent="Teams" instance=ExtResource( 8 )]
team = "Team_1"
color = "Red"

[node name="Objects" type="Node" parent="."]

[node name="PlayerUI" parent="." instance=ExtResource( 9 )]

[node name="GameOver" parent="." instance=ExtResource( 10 )]
visible = false
[connection signal="on_death" from="Characters/Player" to="." method="_on_Player_on_death"]
[connection signal="on_drop_object" from="Characters/Player" to="PlayerUI" method="_on_Player_on_drop_object"]
[connection signal="on_health_change" from="Characters/Player" to="PlayerUI" method="_on_Player_on_health_change"]
[connection signal="on_take_object" from="Characters/Player" to="PlayerUI" method="_on_Player_on_take_object"]
