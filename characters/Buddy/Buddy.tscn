[gd_scene load_steps=26 format=2]

[ext_resource path="res://characters/Buddy/Buddy.gd" type="Script" id=1]
[ext_resource path="res://characters/Buddy/BodyBlue.material" type="Material" id=2]
[ext_resource path="res://characters/Buddy/Hand.material" type="Material" id=3]
[ext_resource path="res://characters/Buddy/Foot.material" type="Material" id=4]
[ext_resource path="res://characters/Buddy/catch-cycle.anim" type="Animation" id=5]
[ext_resource path="res://characters/Buddy/default.anim" type="Animation" id=6]
[ext_resource path="res://characters/Buddy/gun_aim.anim" type="Animation" id=7]
[ext_resource path="res://characters/Buddy/idle.anim" type="Animation" id=8]
[ext_resource path="res://characters/Buddy/punch.anim" type="Animation" id=9]
[ext_resource path="res://characters/Buddy/walk.anim" type="Animation" id=10]

[sub_resource type="CapsuleShape" id=1]
radius = 0.486064
height = 0.431546

[sub_resource type="CapsuleMesh" id=2]

[sub_resource type="SphereShape" id=3]
radius = 0.673517

[sub_resource type="SphereShape" id=4]
radius = 22.0463

[sub_resource type="AnimationNodeAnimation" id=5]
animation = "catch-cycle"

[sub_resource type="AnimationNodeBlend2" id=6]
filter_enabled = true
filters = [ "Body", "BodyLeftHand", "BodyRightHand" ]

[sub_resource type="AnimationNodeAnimation" id=7]
animation = "idle"

[sub_resource type="AnimationNodeAnimation" id=8]
animation = "walk-cycle"

[sub_resource type="AnimationNodeStateMachineTransition" id=9]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachineTransition" id=10]
xfade_time = 0.5

[sub_resource type="AnimationNodeStateMachine" id=11]
states/idle/node = SubResource( 7 )
states/idle/position = Vector2( 164, -12 )
states/walk-cycle/node = SubResource( 8 )
states/walk-cycle/position = Vector2( 488, -12 )
transitions = [ "idle", "walk-cycle", SubResource( 9 ), "walk-cycle", "idle", SubResource( 10 ) ]
graph_offset = Vector2( -137, -115 )

[sub_resource type="AnimationNodeOneShot" id=12]
filter_enabled = true
filters = [ "BodyLeftHand" ]

[sub_resource type="AnimationNodeAnimation" id=13]
animation = "punch"

[sub_resource type="AnimationNodeBlendTree" id=14]
graph_offset = Vector2( 0, 63.5 )
nodes/Animation/node = SubResource( 5 )
nodes/Animation/position = Vector2( 400, 260 )
nodes/HoldObject/node = SubResource( 6 )
nodes/HoldObject/position = Vector2( 720, 60 )
nodes/Move/node = SubResource( 11 )
nodes/Move/position = Vector2( 0, 0 )
nodes/Punch/node = SubResource( 12 )
nodes/Punch/position = Vector2( 360, 60 )
nodes/PunchAnim/node = SubResource( 13 )
nodes/PunchAnim/position = Vector2( 40, 260 )
nodes/output/position = Vector2( 1020, 60 )
node_connections = [ "output", 0, "HoldObject", "HoldObject", 0, "Punch", "HoldObject", 1, "Animation", "Punch", 0, "Move", "Punch", 1, "PunchAnim" ]

[sub_resource type="AnimationNodeStateMachinePlayback" id=15]

[node name="Buddy" type="KinematicBody" groups=[
"character",
]]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.973, 0 )
collision_layer = 2
collision_mask = 3
script = ExtResource( 1 )

[node name="CollisionShape" type="CollisionShape" parent="."]
transform = Transform( 1, 0, 0, 0, -4.37114e-008, -1, 0, 1, -4.37114e-008, 0, 0, 0 )
shape = SubResource( 1 )

[node name="Body" type="Spatial" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.00430261, 0 )

[node name="Body" type="MeshInstance" parent="Body"]
transform = Transform( 0.4, 0, 0, 0, -1.94131e-008, -0.44, 0, 0.44412, -1.9233e-008, 0, 0, 0 )
mesh = SubResource( 2 )
material/0 = ExtResource( 2 )

[node name="BodyLeftHand" type="Spatial" parent="."]
editor/display_folded = true
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.518391, -0.0696238, 0 )

[node name="CSGCombiner" type="CSGCombiner" parent="BodyLeftHand"]
editor/display_folded = true
transform = Transform( 0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0 )

[node name="CSGBox" type="CSGBox" parent="BodyLeftHand/CSGCombiner"]
transform = Transform( 1.12872, 0, 0, 0, 1.14768, 0, 0, 0, 1.23187, 0.304599, 0, 0 )
material = ExtResource( 3 )

[node name="CSGBox2" type="CSGBox" parent="BodyLeftHand/CSGCombiner"]
transform = Transform( 0.72221, 0, 0, 0, 1.27913, 0, 0, 0, 1, -0.222855, 0, 0.722494 )
operation = 2
material = ExtResource( 3 )

[node name="LeftHand" type="Position3D" parent="BodyLeftHand"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0450835, 0.0211042, 0.078396 )

[node name="BodyRightHand" type="Spatial" parent="."]
editor/display_folded = true
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.52351, 0, 0 )

[node name="CSGCombiner2" type="CSGCombiner" parent="BodyRightHand"]
editor/display_folded = true
transform = Transform( -0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0.0119659, -0.0725174, -0.00196791 )

[node name="CSGBox" type="CSGBox" parent="BodyRightHand/CSGCombiner2"]
transform = Transform( 1.12872, 0, 0, 0, 1.14768, 0, 0, 0, 1.23187, 0.304599, 0, 0 )
material = ExtResource( 3 )

[node name="CSGBox2" type="CSGBox" parent="BodyRightHand/CSGCombiner2"]
transform = Transform( 0.72221, 0, 0, 0, 1.27913, 0, 0, 0, 1, -0.222855, 0, 0.722494 )
operation = 2
material = ExtResource( 3 )

[node name="RightHand" type="Position3D" parent="BodyRightHand"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.0588321, -0.0119864, 0.0783317 )

[node name="BodyRightFoot" type="CSGCombiner" parent="."]
editor/display_folded = true
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, -0.529327, -0.707403, 0 )

[node name="CSGCylinder" type="CSGCylinder" parent="BodyRightFoot"]
transform = Transform( 0.2, 0, 0, 0, -1.74846e-008, -0.25, 0, 0.4, -1.09278e-008, 0, 0, 0 )
material = ExtResource( 4 )

[node name="CSGBox" type="CSGBox" parent="BodyRightFoot"]
transform = Transform( 0.3, 0, 0, 0, 0.173095, 0, 0, 0, 0.294069, 0, -0.171094, 0 )
operation = 2
material = ExtResource( 4 )

[node name="BodyLeftFoot" type="CSGCombiner" parent="."]
editor/display_folded = true
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0.521512, -0.707403, 0 )

[node name="CSGCylinder" type="CSGCylinder" parent="BodyLeftFoot"]
transform = Transform( 0.2, 0, 0, 0, -1.74846e-008, -0.25, 0, 0.4, -1.09278e-008, 0, 0, 0 )
material = ExtResource( 4 )

[node name="CSGBox" type="CSGBox" parent="BodyLeftFoot"]
transform = Transform( 0.3, 0, 0, 0, 0.173095, 0, 0, 0, 0.294069, 0, -0.171094, 0 )
operation = 2
material = ExtResource( 4 )

[node name="CatchArea" type="Area" parent="."]
editor/display_folded = true
collision_layer = 16
collision_mask = 36

[node name="CollisionShape" type="CollisionShape" parent="CatchArea"]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.293249, 0.800265 )
shape = SubResource( 3 )

[node name="EnnemyDetection" type="Area" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape" type="CollisionShape" parent="EnnemyDetection"]
shape = SubResource( 4 )

[node name="HoldPosition" type="Position3D" parent="."]
transform = Transform( 1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.44492, 0.843572 )

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
autoplay = "idle"
anims/catch-cycle = ExtResource( 5 )
anims/default = ExtResource( 6 )
anims/gun_aim = ExtResource( 7 )
anims/idle = ExtResource( 8 )
anims/punch = ExtResource( 9 )
anims/walk-cycle = ExtResource( 10 )

[node name="AnimationTree" type="AnimationTree" parent="."]
tree_root = SubResource( 14 )
anim_player = NodePath("../AnimationPlayer")
active = true
parameters/HoldObject/blend_amount = 0.0
parameters/Move/playback = SubResource( 15 )
parameters/Punch/active = false
[connection signal="body_entered" from="EnnemyDetection" to="." method="_on_EnnemyDetection_body_entered"]
[connection signal="body_exited" from="EnnemyDetection" to="." method="_on_EnnemyDetection_body_exited"]
